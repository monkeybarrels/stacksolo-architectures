{
  "project": {
    "name": "{{projectName}}",
    "gcpProjectId": "{{gcpProjectId}}",
    "region": "{{region}}",
    "backend": "gcp",
    "plugins": [
      "@stacksolo/plugin-gcp-cdktf",
      "@stacksolo/plugin-gcp-kernel"
    ],
    "gcpKernel": {
      "name": "kernel",
      "firebaseProjectId": "{{gcpProjectId}}"
    },
    "buckets": [
      { "name": "{{projectName}}-documents" }
    ],
    "networks": [
      {
        "name": "main",
        "containers": [
          {
            "name": "api",
            "port": 8080,
            "allowUnauthenticated": true,
            "env": {
              "NODE_ENV": "production",
              "GCP_PROJECT_ID": "{{gcpProjectId}}",
              "GCP_REGION": "{{region}}",
              "DOCUMENTS_BUCKET": "@bucket/{{projectName}}-documents.name"
            }
          }
        ],
        "uis": [
          {
            "name": "chat",
            "framework": "react",
            "buildCommand": "npm run build",
            "outputDir": "dist"
          },
          {
            "name": "admin",
            "framework": "react",
            "buildCommand": "npm run build",
            "outputDir": "dist",
            "iap": {
              "enabled": true,
              "oauth2ClientId": "{{adminOauthClientId}}",
              "oauth2ClientSecret": "{{adminOauthClientSecret}}"
            }
          }
        ],
        "loadBalancer": {
          "name": "gateway",
          "routes": [
            { "path": "/api/*", "backend": "api" },
            { "path": "/admin/*", "backend": "admin" },
            { "path": "/*", "backend": "chat" }
          ]
        }
      }
    ]
  }
}
